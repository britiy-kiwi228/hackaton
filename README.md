Разработка автоматизированной информационной системы для формирования команд и управления хакатонами
Аннотация
В данной работе рассматривается проектирование и реализация веб-платформы, направленной на решение проблемы асимметрии информации при поиске участников проектных команд (Team Matchmaking). Система автоматизирует процессы регистрации, валидации компетенций и мэтчинга участников, используя современные подходы веб-разработки (SPA, REST API) и криптографические методы аутентификации.
1. Архитектура системы
Проект построен по классической клиент-серверной архитектуре с четким разделением ответственности (Separation of Concerns).
1.1 Серверная часть (Backend)
Бэкенд реализован на фреймворке FastAPI. Выбор обусловлен поддержкой асинхронности (ASGI), что критически важно для высоконагруженных систем с большим количеством одновременных запросов (типичный сценарий старта хакатона).
Ключевые архитектурные компоненты, обнаруженные в проекте:
Dependency Injection (Внедрение зависимостей): Используется паттерн Depends для управления сессиями базы данных (get_db) и получения текущего пользователя (get_current_user). Это обеспечивает модульность и тестируемость кода.
Middleware: Реализован слой промежуточного ПО (в частности AddUserToRequestMiddleware и logging_middleware), который перехватывает запросы до попадания в роутеры. Это позволяет централизованно логировать действия и управлять контекстом запроса, что повышает наблюдаемость системы (Observability).
Exception Handling: Внедрена централизованная обработка ошибок (exception_handlers.py), преобразующая системные исключения и ошибки валидации Pydantic в стандартизированные JSON-ответы с понятными кодами состояния HTTP.
1.2 Клиентская часть (Frontend)
Клиентская часть представляет собой SPA (Single Page Application), реализованное на стеке React + TypeScript.
Типизация: Использование TypeScript со строгими интерфейсами (src/shared/api/types.ts) гарантирует согласованность данных между клиентом и сервером, исключая класс ошибок undefined is not a function на этапе компиляции.
Сборка: В качестве инструмента сборки используется Vite, обеспечивающий высокую скорость HMR (Hot Module Replacement) при разработке и оптимизированный бандл в продакшене.
Управление состоянием: Реализован глобальный контекст авторизации (AuthProvider), что позволяет управлять доступом к защищенным маршрутам на уровне всего приложения.
2. Проектирование Базы Данных и ORM
В качестве слоя абстракции данных используется SQLAlchemy 2.0. Схема базы данных спроектирована с учетом 3-й нормальной формы (3NF).
2.1 Сущности и Связи
Анализ моделей (models.py) выявляет сложную реляционную структуру:
Users (Пользователи): Центральная сущность. Содержит поля для авторизации (Telegram ID, хэши паролей для админов) и профиля.
Teams (Команды): Имеет связь "Один-ко-Многим" с пользователями (через team_id) и связь "Один-к-Одному" с капитаном (captain_id).
Skills (Компетенции): Реализована связь "Многие-ко-Многим" с пользователями через промежуточную таблицу user_skills. Это позволяет эффективно фильтровать специалистов по стеку технологий.
Hackathons (Хакатоны): Агрегирующая сущность, связывающая команды и заявки в единый контекст события.
2.2 Управление миграциями
Особенностью проекта является использование Alembic для версионирования схемы БД. В проекте обнаружен кастомный скрипт автоматизации autogenerate_migration.py, который упрощает процесс создания миграций, автоматически сравнивая метаданные моделей с текущим состоянием БД. Это минимизирует риск рассинхронизации схемы данных при командной разработке.
3. Система Аутентификации и Безопасности
3.1 Гибридная модель авторизации
Проект поддерживает два параллельных механизма входа, что нетипично для студенческих проектов и указывает на высокую проработку:
OAuth-подобная авторизация через Telegram:
Реализована валидация данных на стороне сервера (скрипт debug_auth.py демонстрирует глубокое понимание процесса). Сервер проверяет целостность данных (data_check_string) путем вычисления HMAC-SHA256 хеша с использованием секретного ключа бота. Это исключает возможность Man-in-the-Middle атак и подделки личности.
Классическая авторизация (Email/Password):
Используется для административного доступа. Пароли не хранятся в открытом виде, а хешируются с использованием алгоритма bcrypt (библиотека passlib).
3.2 Управление сессиями
Используется стандарт JWT (JSON Web Token). Токены подписываются алгоритмом HS256. Внедрен механизм внедрения зависимостей get_current_user, который декодирует токен и извлекает пользователя из БД при каждом защищенном запросе.
4. Алгоритмы и Бизнес-логика
4.1 Система Рекомендаций
В модуле recommendations.py (судя по структуре роутеров) заложена логика мэтчинга. Система не просто возвращает случайные данные, а фильтрует сущности (команды или участников) на основе контекста:
ID текущего хакатона.
Статус поиска (is_looking в модели Team).
Компетенции пользователя (пересечение множеств скиллов).
4.2 Управление жизненным циклом заявки
Реализован конечный автомат (State Machine) для заявок (Requests). Заявка проходит стадии: pending -> accepted / declined. Это предотвращает логические коллизии (например, вступление пользователя в две команды одновременно).
5. Инструментарий разработчика и DevOps
В проекте обнаружены признаки культуры DevOps и автоматизации рутины, выходящие за рамки стандартного учебного задания:
Кастомные CLI-утилиты:
check_db_structure.py: Скрипт для инспекции целостности SQLite БД, индексов и внешних ключей без использования стороннего GUI.
generate_secret.py: Утилита для генерации криптографически стойких ключей, что повышает безопасность развертывания.
Административная панель: Интеграция библиотеки sqladmin предоставляет готовый GUI для CRUD-операций над всеми сущностями БД, что значительно ускоряет поддержку и модерацию контента во время ивента.
Тестирование: Наличие test_api_with_testclient.py и конфигурации pytest говорит о применении подхода TDD (или близкого к нему). Тестируются как "счастливые пути" (status 200), так и граничные случаи (ошибки валидации, доступ без токена).
Заключение
Разработанная система представляет собой законченное программное решение уровня MVP. Использование строгой типизации, нормализованной базы данных, миграций и криптографически защищенной авторизации обеспечивает высокую надежность и безопасность системы. Архитектура проекта модульная и допускает горизонтальное масштабирование (например, замену SQLite на PostgreSQL) с минимальными трудозатратами.
